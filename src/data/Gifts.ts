import { z } from "zod"
import { giftNameSchema, GiftName } from "./NameSchemas"

// Using same structure as disciplines/powers for compatibility
export const giftSchema = z.object({
    name: z.string(),
    description: z.string(),
    summary: z.string(),
    dicePool: z.string(),
    level: z.number().min(1).int(),
    gift: giftNameSchema, // Gift type (Rage, Wisdom, etc.)
    cost: z.string(), // Rage/Gnosis cost
    duration: z.string(),
})
export type Gift = z.infer<typeof giftSchema>

export const giftTypeSchema = z.object({
    tribes: z.string().array(),
    summary: z.string(),
    logo: z.string(),
    powers: giftSchema.array(),
})
export type GiftType = z.infer<typeof giftTypeSchema>

// Werewolf gifts organized by type
export const gifts: Record<GiftName, GiftType> = {
    rage: {
        tribes: ["All"],
        summary: "Channel fury and primal instincts",
        logo: "",
        powers: [
            {
                name: "Primal Urge",
                description: "Channel your raw fury to enhance physical capabilities",
                summary: "Add Rage to Strength or Stamina rolls for one scene",
                dicePool: "Stamina + Primal Instinct",
                level: 1,
                gift: "rage",
                cost: "1 Rage",
                duration: "One scene",
            },
            {
                name: "Resist Pain",
                description: "Ignore the distracting effects of injury",
                summary: "Ignore wound penalties for one scene",
                dicePool: "Stamina + Primal Instinct",
                level: 1,
                gift: "rage",
                cost: "1 Rage",
                duration: "One scene",
            },
            {
                name: "Razor Claws",
                description: "Extend razor-sharp claws capable of rending flesh and armor",
                summary: "Gain lethal natural weapons that ignore 2 points of armor",
                dicePool: "",
                level: 2,
                gift: "rage",
                cost: "1 Rage",
                duration: "One scene",
            },
            {
                name: "Berserk",
                description: "Enter a controlled frenzy of destruction",
                summary: "Double dice pool for physical actions but cannot use social skills",
                dicePool: "Rage + Primal Instinct",
                level: 3,
                gift: "rage",
                cost: "2 Rage",
                duration: "One scene",
            },
        ],
    },
    wisdom: {
        tribes: ["All"],
        summary: "Ancient knowledge and spiritual insight",
        logo: "",
        powers: [
            {
                name: "Spirit Speech",
                description: "Communicate with spirits in the spirit world",
                summary: "Speak with spirits and understand their communications",
                dicePool: "Manipulation + Occult",
                level: 1,
                gift: "wisdom",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Sense Wyrm",
                description: "Detect the taint of the Wyrm in people, places, or objects",
                summary: "Sense corruption and evil within 100 feet",
                dicePool: "Perception + Occult",
                level: 1,
                gift: "wisdom",
                cost: "1 Gnosis",
                duration: "Instant",
            },
            {
                name: "Truth of Gaia",
                description: "Compel others to speak only the truth",
                summary: "Target cannot lie for the duration",
                dicePool: "Manipulation + Empathy",
                level: 2,
                gift: "wisdom",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Wisdom of the Ancient Ways",
                description: "Access the collective knowledge of your ancestors",
                summary: "Gain knowledge about any topic from ancestral memory",
                dicePool: "Intelligence + Occult",
                level: 3,
                gift: "wisdom",
                cost: "2 Gnosis",
                duration: "Instant",
            },
        ],
    },
    war: {
        tribes: ["Shadow Lords", "Silver Fangs", "Red Talons"],
        summary: "Combat prowess and tactical knowledge",
        logo: "",
        powers: [
            {
                name: "Inspiration",
                description: "Rally your packmates with words of courage and determination",
                summary: "Grant allies bonus dice on their next action",
                dicePool: "Charisma + Leadership",
                level: 1,
                gift: "war",
                cost: "1 Gnosis",
                duration: "Instant",
            },
            {
                name: "Falling Touch",
                description: "Send an enemy sprawling with a touch",
                summary: "Knock target prone with a successful touch",
                dicePool: "Dexterity + Brawl",
                level: 1,
                gift: "war",
                cost: "1 Rage",
                duration: "Instant",
            },
            {
                name: "Heart of Fury",
                description: "Become immune to fear and supernatural terror",
                summary: "Immunity to fear effects and terror",
                dicePool: "Willpower + Composure",
                level: 2,
                gift: "war",
                cost: "1 Rage",
                duration: "One scene",
            },
            {
                name: "Silver Claws",
                description: "Transform your claws into pure silver",
                summary: "Claws become silver and cause aggravated damage to supernatural creatures",
                dicePool: "",
                level: 3,
                gift: "war",
                cost: "2 Gnosis",
                duration: "One scene",
            },
        ],
    },
    nature: {
        tribes: ["Bone Gnawers", "Children of Gaia", "Hart Wardens"],
        summary: "Connection to the natural world and its creatures",
        logo: "",
        powers: [
            {
                name: "Animal Speech",
                description: "Communicate with natural animals",
                summary: "Speak with and understand any animal",
                dicePool: "Charisma + Animal Ken",
                level: 1,
                gift: "nature",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Camouflage",
                description: "Blend perfectly with natural surroundings",
                summary: "Become nearly invisible in wilderness settings",
                dicePool: "Dexterity + Survival",
                level: 1,
                gift: "nature",
                cost: "1 Gnosis",
                duration: "One hour",
            },
            {
                name: "Call of the Wild",
                description: "Summon animals to your aid",
                summary: "Animals in the area come to assist you",
                dicePool: "Charisma + Animal Ken",
                level: 2,
                gift: "nature",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Living Wood",
                description: "Animate trees and plants to fight for you",
                summary: "Plants become temporary allies under your control",
                dicePool: "Manipulation + Survival",
                level: 3,
                gift: "nature",
                cost: "2 Gnosis",
                duration: "One scene",
            },
        ],
    },
    technology: {
        tribes: ["Glass Walkers", "Galestalkers"],
        summary: "Master modern technology and urban environments",
        logo: "",
        powers: [
            {
                name: "Control Simple Machine",
                description: "Command simple mechanical devices",
                summary: "Control elevators, automatic doors, simple electronics",
                dicePool: "Manipulation + Technology",
                level: 1,
                gift: "technology",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Cybersenses",
                description: "Interface directly with electronic surveillance systems",
                summary: "See through cameras and electronic sensors",
                dicePool: "Intelligence + Technology",
                level: 2,
                gift: "technology",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Power Surge",
                description: "Overload electrical systems with spiritual energy",
                summary: "Cause electronics to malfunction or explode",
                dicePool: "Gnosis + Technology",
                level: 2,
                gift: "technology",
                cost: "1 Gnosis",
                duration: "Instant",
            },
            {
                name: "Jam Technology",
                description: "Disable all technology in the area",
                summary: "Electronics cease to function in a large area",
                dicePool: "Gnosis + Technology",
                level: 3,
                gift: "technology",
                cost: "2 Gnosis",
                duration: "One hour",
            },
        ],
    },
    spirit: {
        tribes: ["Silent Striders", "Ghost Council"],
        summary: "Navigate the spirit world and communicate with the dead",
        logo: "",
        powers: [
            {
                name: "Peek",
                description: "Briefly glimpse into the spirit world",
                summary: "See spirits and the Umbra for a moment",
                dicePool: "Perception + Occult",
                level: 1,
                gift: "spirit",
                cost: "1 Gnosis",
                duration: "Instant",
            },
            {
                name: "Spirit Speech",
                description: "Communicate with any spirit",
                summary: "Speak with spirits regardless of their nature",
                dicePool: "Charisma + Occult",
                level: 1,
                gift: "spirit",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Step Sideways",
                description: "Cross into the spirit world",
                summary: "Enter the Umbra/spirit realm",
                dicePool: "Gnosis + Occult",
                level: 2,
                gift: "spirit",
                cost: "1 Gnosis",
                duration: "Until you return",
            },
            {
                name: "Spirit Sight",
                description: "See the spirit world overlaid on the physical",
                summary: "Perceive both worlds simultaneously",
                dicePool: "Perception + Occult",
                level: 3,
                gift: "spirit",
                cost: "2 Gnosis",
                duration: "One scene",
            },
        ],
    },
    shadow: {
        tribes: ["Black Furies", "Shadow Lords"],
        summary: "Stealth, deception, and hunting in darkness",
        logo: "",
        powers: [
            {
                name: "Blur of the Milky Eye",
                description: "Become difficult to focus on or remember",
                summary: "Others have difficulty noticing or remembering you",
                dicePool: "Manipulation + Stealth",
                level: 1,
                gift: "shadow",
                cost: "1 Gnosis",
                duration: "One scene",
            },
            {
                name: "Shadow Weaving",
                description: "Manipulate shadows to conceal yourself",
                summary: "Wrap shadows around yourself for perfect concealment",
                dicePool: "Dexterity + Stealth",
                level: 2,
                gift: "shadow",
                cost: "1 Gnosis",
                duration: "One hour",
            },
            {
                name: "Pack Shadow",
                description: "Extend shadow gifts to your entire pack",
                summary: "Share shadow gifts with all nearby packmates",
                dicePool: "Gnosis + Stealth",
                level: 2,
                gift: "shadow",
                cost: "2 Gnosis",
                duration: "One scene",
            },
            {
                name: "Engulf",
                description: "Wrap a target in impenetrable darkness",
                summary: "Target is blinded and cannot see anything",
                dicePool: "Gnosis + Stealth",
                level: 3,
                gift: "shadow",
                cost: "2 Gnosis",
                duration: "One scene",
            },
        ],
    },
    "": {
        tribes: [],
        summary: "",
        logo: "",
        powers: [],
    },
}

export const containsRituals = (powers: Gift[]) => powers.filter((gift) => gift.gift === "spirit").length > 0
